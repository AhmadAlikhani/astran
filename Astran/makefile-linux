
# Leandro Sehnem Heck

# Makefile for linux compilation, to compile use:
# make -f make-linux

# TESTED ON:
# - CentOS 5.11
# - Ubuntu 12.04
# - Ubuntu 14.04
# - Ubuntu 15.04

# UBUNTU DEPENDENCIES
# sudo apt-get install wx2.8-headers libwxgtk2.8-0 libwxgtk2.8-dev

export LD_LIBRARY_PATH=/usr/lib64/

BIN=build/bin/Astran
SRC=$(shell find -name "*.cpp")
OBJ=$(SRC:.cpp=.o)

CFLAGS = $(shell wx-config --cxxflags --libs) -Wno-deprecated
LIBS = $(shell wx-config --libs)

build: $(OBJ) $(BIN) pos-compile

%.o: %.cpp %.h
	@ echo Compiling $(@:.o=.cpp)
	@ g++ $(CFLAGS) -c -o $@ $(@:.o=.cpp)

$(BIN): $(OBJ)
	@ g++ -g -o $@ $(OBJ) $(LIBS)

pos-compile:
	@ chmod -x build/bin/astran.cfg
	@ echo "Done, the output diretory is 'build'. Move it to the right place."
	@ echo "Test the binnary with: build/bin/astran --shell"

clean:
	@ rm -rf $(BIN)
	@ rm -rf $(OBJ)
